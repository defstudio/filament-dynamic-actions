document.addEventListener("alpine:init",()=>{Alpine.data("disabled_when_dirty_action",()=>({savedDataHash:null,ignoredPaths:[],setup(i){this.ignoredPaths=i,this.savedDataHash=this.hash(this.$wire.data),Livewire.hook("commit",({commit:e,succeed:t})=>{e.calls.forEach(s=>{s.method==="save"&&t(({effects:a})=>{a.dispatches.filter(n=>n.name==="form-validation-error").length>0||(this.savedDataHash=this.hash(this.$wire.data))})})})},hash(i){i=JSON.parse(JSON.stringify(i));for(let e of this.ignoredPaths){let t=e.split(".");i=this.cleanData(i,t)}return window.jsMd5(JSON.stringify(i).replace(/"/g,""))},cleanData(i,e){let t=e.shift();if(t===void 0)return null;if(t==="*"){for(let s in i)i[s]=this.cleanData(i[s],e);return i}return i[t]=this.cleanData(i[t],e),i},changed(){return this.savedDataHash!==this.hash(this.$wire.data)}}))});
