document.addEventListener("alpine:init",()=>{Alpine.data("disabled_when_dirty_action",()=>({savedDataHash:null,ignoredPaths:[],setup(e){this.ignoredPaths=e,this.savedDataHash=this.hash(this.$wire.data),Livewire.hook("commit",({commit:s,succeed:i})=>{s.calls.forEach(t=>{t.method==="save"&&i(({effects:n})=>{n.dispatches.filter(h=>h.name==="form-validation-error").length>0||(this.savedDataHash=this.hash(this.$wire.data))})})})},hash(e){e=JSON.parse(JSON.stringify(e)),console.debug("before",e);for(let s of this.ignoredPaths){let i=s.split(".");e=this.cleanData(e,i)}return console.debug("after",e),window.jsMd5(JSON.stringify(e).replace(/"/g,""))},cleanData(e,s){let i=s.shift();if(i===void 0)return null;if(console.log(e,i,s),i==="*"){for(let t in e)e[t]=this.cleanData(e[t],s);return e}return e[i]=this.cleanData(e[i],s),e},changed(){return this.savedDataHash!==this.hash(this.$wire.data)}}))});
